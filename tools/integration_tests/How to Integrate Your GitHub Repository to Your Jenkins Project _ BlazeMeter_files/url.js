+function(){"use strict";var a=/\[([^\[]*)\]$/,b=/^(?:([a-z]*):)?(?:\/\/)?(?:([^:@]*)(?::([^@]*))?@)?([a-z-._]+)?(?::([0-9]*))?(\/[^?#]*)?(?:\?([^#]*))?(?:#(.*))?$/i,c=["mailto","bitcoin"],d={get:function(b,c){b=b||"","undefined"==typeof c&&(c={}),"undefined"==typeof c.full&&(c.full=!1),"undefined"==typeof c.array&&(c.array=!1),c.full===!0&&(b=d.parse(b,{get:!1}).query||"");for(var e={},f=b.split("&"),g=0;g<f.length;g++)if(f[g].length){var h=f[g].indexOf("="),i=f[g],j=!0;if(h>=0&&(i=f[g].substr(0,h),j=f[g].substr(h+1),j=decodeURIComponent(j)),c.array){for(var l,k=[],m=e,n=i;l=n.match(a);)n=n.substr(0,l.index),k.unshift(decodeURIComponent(l[1]));if(n=decodeURIComponent(n),k.some(function(a){return"undefined"==typeof m[n]&&(m[n]=[]),!Array.isArray(m[n])||(m=m[n],""===a&&(a=m.length),void(n=a))}))continue;m[n]=j}else i=decodeURIComponent(i),e[i]=j}return e},buildget:function(a,b){var c=[];for(var e in a){var f=encodeURIComponent(e);"undefined"!=typeof b&&(f=b+"["+f+"]");var g=a[e];switch(typeof g){case"boolean":c.push(f);break;case"number":g=g.toString();case"string":c.push(f+"="+encodeURIComponent(g));break;case"object":c.push(d.buildget(g,f))}}return c.join("&")},parse:function(a,c){"undefined"==typeof c&&(c={});var e=a.match(b)||[],f={url:a,scheme:e[1],user:e[2],pass:e[3],host:e[4],port:e[5]&&+e[5],path:e[6],query:e[7],hash:e[8]};return c.get!==!1&&(f.get=f.query&&d.get(f.query,c.get)),f},build:function(a,b){b=b||{};var e="";if("undefined"!=typeof a.scheme&&(e+=a.scheme,e+=c.indexOf(a.scheme)>=0?":":"://"),"undefined"!=typeof a.user&&(e+=a.user,"undefined"==typeof a.pass&&(e+="@")),"undefined"!=typeof a.pass&&(e+=":"+a.pass+"@"),"undefined"!=typeof a.host&&(e+=a.host),"undefined"!=typeof a.port&&(e+=":"+a.port),"undefined"!=typeof a.path&&(e+=a.path),b.useemptyget)"undefined"!=typeof a.get?e+="?"+d.buildget(a.get):"undefined"!=typeof a.query&&(e+="?"+a.query);else{var f=a.get&&d.buildget(a.get)||a.query;f&&(e+="?"+f)}return"undefined"!=typeof a.hash&&(e+="#"+a.hash),e||a.url||""}};"undefined"!=typeof define&&define.amd?define(d):"undefined"!=typeof module?module.exports=d:window.url=d}();